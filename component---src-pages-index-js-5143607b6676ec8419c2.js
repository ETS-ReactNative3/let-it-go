(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{143:function(e,t,a){"use strict";a.r(t);a(35),a(157),a(147);var n=a(36),l=a.n(n),i=a(7),r=a.n(i),s=a(0),c=a.n(s),o=a(148),h=a(160),m=function(e){return c.a.createElement(h.a,{content:e.content,arrow:!0,trigger:"click",placement:"bottom"},c.a.createElement("img",{style:{verticalAlign:"middle"},src:"https://material.io/tools/icons/static/icons/baseline-help_outline-24px.svg",alt:""}))},u=c.a.createElement("div",{style:{textAlign:"left"}},"Legend:",c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("i",{className:"em-svg em-man-raising-hand"}),": Has male toilet"),c.a.createElement("li",null,c.a.createElement("i",{className:"em-svg em-woman-raising-hand"}),": Has female toilet"),c.a.createElement("li",null,c.a.createElement("i",{className:"em-svg em-wheelchair"}),": Is wheelchair accessible (Includes seperate handicapped toilets or those inside toilets as a larger cubicle)"))),d=function(){return c.a.createElement(m,{content:u})},p=c.a.createElement("div",{style:{textAlign:"left"}},"Choosing an option will remove any toilet without the chosen feature from the list. Multiple selections will make criteria more stringent.",c.a.createElement("br",null),'E.g. Selecting "Male" and "Has Water Cooler" will only show toilets that has Male toilets and has a water cooler nearby.'),g=function(){return c.a.createElement(m,{content:p})},E=a(146);function C(e,t,a,n){if(null===e||null===a||null===t||null===n)return"Location not available";var l=(a-e)*(Math.PI/180),i=(n-t)*(Math.PI/180),r=Math.sin(l/2)*Math.sin(l/2)+Math.cos(e*(Math.PI/180))*Math.cos(a*(Math.PI/180))*Math.sin(i/2)*Math.sin(i/2),s=6371e3*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)));return Math.round(s)}function f(e){return null!=e.paranoma.maleYaw}function y(e){return null!=e.paranoma.femaleYaw}function k(e){return null!=e.paranoma.handicappedYaw}a.d(t,"default",function(){return v}),a.d(t,"query",function(){return w});var b=!1,v=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={toilets:a.props.data.allToilets.nodes.slice(0),myLat:null,myLon:null,sortBy:"name",isFilterHidden:!0,maleChecked:!1,femaleChecked:!1,handicappedChecked:!1,waterCoolerChecked:!1,showerHeadsChecked:!1,hoseChecked:!1},a.sortByDistance=a.sortByDistance.bind(l()(a)),a.compareDistance=a.compareDistance.bind(l()(a)),a.sortByName=a.sortByName.bind(l()(a)),a.updatePosition=a.updatePosition.bind(l()(a)),a.handleChange=a.handleChange.bind(l()(a)),a.handleClick=a.handleClick.bind(l()(a)),a.handleFilterChange=a.handleFilterChange.bind(l()(a)),a.isShown=a.isShown.bind(l()(a)),a}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){b=!1,this.updatePosition()},a.handleChange=function(e){this.setState({sortBy:e.target.value}),"name"===e.target.value?this.sortByName():this.sortByDistance()},a.handleClick=function(){this.setState({isFilterHidden:!this.state.isFilterHidden})},a.handleFilterChange=function(e){var t;this.setState(((t={})[e.target.name]=!this.state[e.target.name],t))},a.sortByDistance=function(){var e=this.state.toilets.slice(0);e.sort(this.compareDistance),this.setState({toilets:e})},a.compareDistance=function(e,t){return C(e.lat,e.lon,this.state.myLat,this.state.myLon)-C(t.lat,t.lon,this.state.myLat,this.state.myLon)},a.sortByName=function(){var e=this.state.toilets.slice(0);e.sort(function(e,t){return e.name.localeCompare(t.name)}),this.setState({toilets:e})},a.isShown=function(e){return(!this.state.maleChecked||f(e))&&(!this.state.femaleChecked||y(e))&&(!this.state.handicappedChecked||k(e))&&(!this.state.showerHeadsChecked||function(e){return e.facilities.showerHeads}(e))&&(!this.state.hoseChecked||function(e){return e.facilities.hose}(e))&&(!this.state.waterCoolerChecked||function(e){return null!=e.paranoma.waterCoolerYaw}(e))},a.updatePosition=function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.setState({myLat:t.coords.latitude,myLon:t.coords.longitude,sortBy:"distance"}),b=!0,e.sortByDistance()},function(){b=!1},{enableHighAccuracy:!0}):b=!1,this.forceUpdate()},a.render=function(){var e=this,t={fontSize:"calc(0.6em + 0.5vw)"};return c.a.createElement(o.a,{main:!0},c.a.createElement("div",{style:{float:"right"}},c.a.createElement("label",null,"Sort by:",c.a.createElement("select",{value:this.state.sortBy,onChange:this.handleChange},c.a.createElement("option",{value:"name"},"Name"),b&&c.a.createElement("option",{value:"distance"},"Distance")))),c.a.createElement("button",{onClick:this.handleClick},this.state.isFilterHidden?"Filter":"Hide"),!this.state.isFilterHidden&&c.a.createElement("div",null,c.a.createElement("p",null,"Show only",c.a.createElement(g,null),":"),c.a.createElement("label",null,c.a.createElement("input",{name:"maleChecked",type:"checkbox",checked:this.state.maleChecked,onChange:this.handleFilterChange}),"Male"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{name:"femaleChecked",type:"checkbox",checked:this.state.femaleChecked,onChange:this.handleFilterChange}),"Female"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{name:"handicappedChecked",type:"checkbox",checked:this.state.handicappedChecked,onChange:this.handleFilterChange}),"Wheelchair accessible"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{name:"showerHeadsChecked",type:"checkbox",checked:this.state.showerHeadsChecked,onChange:this.handleFilterChange}),"Has Shower Heads"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{name:"hoseChecked",type:"checkbox",checked:this.state.hoseChecked,onChange:this.handleFilterChange}),"Has Hoses"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{name:"waterCoolerChecked",type:"checkbox",checked:this.state.waterCoolerChecked,onChange:this.handleFilterChange}),"Has Water Cooler"),c.a.createElement("br",null)),!b&&c.a.createElement("p",null,"Location services not working! (Add help popup, convert to component)"),c.a.createElement("table",{style:{tableLayout:"fixed"}},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Types",c.a.createElement(d,null)),c.a.createElement("th",null,"Distance (m)"))),c.a.createElement("tbody",null,this.state.toilets.filter(this.isShown).map(function(a,n){return c.a.createElement("tr",{key:n},c.a.createElement("td",null,c.a.createElement(E.a,{to:"/"+a.name.replace(/\s/g,"")},a.name)),c.a.createElement("td",{style:{textAlign:"center"}},f(a)&&c.a.createElement("i",{className:"em-svg em-man-raising-hand",style:t}),y(a)&&c.a.createElement("i",{className:"em-svg em-woman-raising-hand",style:t}),k(a)&&c.a.createElement("i",{className:"em-svg em-wheelchair",style:t})),c.a.createElement("td",null,c.a.createElement("span",null,C(e.state.myLat,e.state.myLon,a.lat,a.lon))))}))))},t}(c.a.Component),w="2286568105"},145:function(e,t,a){var n;e.exports=(n=a(149))&&n.default||n},146:function(e,t,a){"use strict";var n=a(0),l=a.n(n),i=a(4),r=a.n(i),s=a(33),c=a.n(s);a.d(t,"a",function(){return c.a});a(145),l.a.createContext({});r.a.object,r.a.string.isRequired,r.a.func,r.a.func},148:function(e,t,a){"use strict";var n=a(0),l=a.n(n),i=a(146);t.a=function(e){return l.a.createElement("div",{style:{margin:"3rem auto",maxWidth:650,padding:"0 1rem"}},!e.main&&l.a.createElement(i.a,{to:"/"},"Back"),e.main&&l.a.createElement("h1",null,"Let It Go"),e.children)}},149:function(e,t,a){"use strict";a.r(t);a(34);var n=a(0),l=a.n(n),i=a(4),r=a.n(i),s=a(56),c=a(2),o=function(e){var t=e.location,a=c.default.getResourcesForPathnameSync(t.pathname);return a?l.a.createElement(s.a,Object.assign({location:t,pageResources:a},a.json)):null};o.propTypes={location:r.a.shape({pathname:r.a.string.isRequired}).isRequired},t.default=o}}]);
//# sourceMappingURL=component---src-pages-index-js-5143607b6676ec8419c2.js.map