(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{143:function(e,t,a){"use strict";a.r(t);a(36),a(162),a(151);var n=a(37),r=a.n(n),l=a(7),i=a.n(l),o=a(0),c=a.n(o),s=a(148),u=a(146),h=c.a.createElement("div",{style:{textAlign:"left"}},"Legend:",c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("i",{className:"em-svg em-man-raising-hand"}),": Has male toilet"),c.a.createElement("li",null,c.a.createElement("i",{className:"em-svg em-woman-raising-hand"}),": Has female toilet"),c.a.createElement("li",null,c.a.createElement("i",{className:"em-svg em-wheelchair"}),": Is wheelchair accessible (Includes seperate handicapped toilets or those inside toilets as a larger cubicle)"))),m=function(){return c.a.createElement(u.a,{content:h})},d=c.a.createElement("div",{style:{textAlign:"left"}},"Choosing an option will remove any toilet without the chosen feature from the list. Multiple selections will make criteria more stringent.",c.a.createElement("br",null),'E.g. Selecting "Male" and "Has Water Cooler" will only show toilets that has Male toilets and has a water cooler nearby.'),p=function(){return c.a.createElement(u.a,{content:d})},f=a(150),g=a(147);a(164),a(170);function E(e,t,a,n){if(null===e||null===a||null===t||null===n)return"Location not available";var r=(a-e)*(Math.PI/180),l=(n-t)*(Math.PI/180),i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*(Math.PI/180))*Math.cos(a*(Math.PI/180))*Math.sin(l/2)*Math.sin(l/2),o=6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)));return Math.round(o)}function y(e){return null!=e.paranoma.maleYaw}function b(e){return null!=e.paranoma.femaleYaw}function v(e){return null!=e.paranoma.handicappedYaw}a.d(t,"default",function(){return w}),a.d(t,"query",function(){return k});var C=!1,w=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={toilets:a.props.data.allToilets.nodes.slice(0),myLat:null,myLon:null,sortBy:"name",isFilterHidden:!0,maleChecked:!1,femaleChecked:!1,handicappedChecked:!1,waterCoolerChecked:!1,showerHeadsChecked:!1,hoseChecked:!1},a.sortByDistance=a.sortByDistance.bind(r()(a)),a.compareDistance=a.compareDistance.bind(r()(a)),a.sortByName=a.sortByName.bind(r()(a)),a.updatePosition=a.updatePosition.bind(r()(a)),a.handleChange=a.handleChange.bind(r()(a)),a.handleClick=a.handleClick.bind(r()(a)),a.handleFilterChange=a.handleFilterChange.bind(r()(a)),a.isShown=a.isShown.bind(r()(a)),a}i()(t,e);var a=t.prototype;return a.componentDidMount=function(){C=!1,this.updatePosition()},a.handleChange=function(e){this.setState({sortBy:e.target.value}),"name"===e.target.value?this.sortByName():this.sortByDistance()},a.handleClick=function(){this.setState({isFilterHidden:!this.state.isFilterHidden})},a.handleFilterChange=function(e){var t;this.setState(((t={})[e.target.name]=!this.state[e.target.name],t))},a.sortByDistance=function(){var e=this.state.toilets.slice(0);e.sort(this.compareDistance),this.setState({toilets:e})},a.compareDistance=function(e,t){return E(e.lat,e.lon,this.state.myLat,this.state.myLon)-E(t.lat,t.lon,this.state.myLat,this.state.myLon)},a.sortByName=function(){var e=this.state.toilets.slice(0);e.sort(function(e,t){return e.name.localeCompare(t.name)}),this.setState({toilets:e})},a.isShown=function(e){return(!this.state.maleChecked||y(e))&&(!this.state.femaleChecked||b(e))&&(!this.state.handicappedChecked||v(e))&&(!this.state.showerHeadsChecked||function(e){return e.facilities.showerHeads}(e))&&(!this.state.hoseChecked||function(e){return e.facilities.hose}(e))&&(!this.state.waterCoolerChecked||function(e){return null!=e.paranoma.waterCoolerYaw}(e))},a.updatePosition=function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.setState({myLat:t.coords.latitude,myLon:t.coords.longitude,sortBy:"distance"}),C=!0,e.sortByDistance()},function(){C=!1},{enableHighAccuracy:!0}):C=!1,this.forceUpdate()},a.render=function(){var e=this,t={fontSize:"calc(0.6em + 0.5vw)"};return c.a.createElement(s.a,{main:!0},c.a.createElement("div",{style:{float:"right"}},c.a.createElement("label",null,"Sort by:",c.a.createElement("select",{value:this.state.sortBy,onChange:this.handleChange},c.a.createElement("option",{value:"name"},"Name"),C&&c.a.createElement("option",{value:"distance"},"Distance")))),c.a.createElement("button",{onClick:this.handleClick},this.state.isFilterHidden?"Filter":"Hide"),!this.state.isFilterHidden&&c.a.createElement("div",null,c.a.createElement("p",null,"Show only",c.a.createElement(p,null),":"),c.a.createElement("label",null,c.a.createElement("input",{name:"maleChecked",type:"checkbox",checked:this.state.maleChecked,onChange:this.handleFilterChange}),"Male"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{name:"femaleChecked",type:"checkbox",checked:this.state.femaleChecked,onChange:this.handleFilterChange}),"Female"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{name:"handicappedChecked",type:"checkbox",checked:this.state.handicappedChecked,onChange:this.handleFilterChange}),"Wheelchair accessible"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{name:"showerHeadsChecked",type:"checkbox",checked:this.state.showerHeadsChecked,onChange:this.handleFilterChange}),"Has Shower Heads"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{name:"hoseChecked",type:"checkbox",checked:this.state.hoseChecked,onChange:this.handleFilterChange}),"Has Hoses"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("input",{name:"waterCoolerChecked",type:"checkbox",checked:this.state.waterCoolerChecked,onChange:this.handleFilterChange}),"Has Water Cooler"),c.a.createElement("br",null)),!C&&c.a.createElement(f.a,null),c.a.createElement("table",{style:{tableLayout:"fixed"}},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Name",C&&c.a.createElement("div",{style:{color:"gray",fontSize:"80%"}},"Distance")),c.a.createElement("th",{style:{textAlign:"center"}},"Types",c.a.createElement(m,null)))),c.a.createElement("tbody",null,this.state.toilets.filter(this.isShown).map(function(a,n){return c.a.createElement("tr",{key:n},c.a.createElement("td",null,c.a.createElement(g.a,{to:"/"+a.name.replace(/\s/g,"")},a.name),c.a.createElement("br",null),C&&c.a.createElement("span",{style:{color:"gray",fontSize:"80%"}},(r=E(e.state.myLat,e.state.myLon,a.lat,a.lon),Number.isInteger(r)?r+"m":r))),c.a.createElement("td",{style:{textAlign:"center"}},y(a)&&c.a.createElement("i",{className:"em-svg em-man-raising-hand",style:t}),b(a)&&c.a.createElement("i",{className:"em-svg em-woman-raising-hand",style:t}),v(a)&&c.a.createElement("i",{className:"em-svg em-wheelchair",style:t})));var r}))))},t}(c.a.Component),k="2286568105"},145:function(e,t,a){var n;e.exports=(n=a(149))&&n.default||n},146:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(154);t.a=function(e){return r.a.createElement(l.a,{content:e.content,arrow:!0,trigger:"click",placement:"bottom",interactive:!0},r.a.createElement("img",{style:{verticalAlign:"middle"},src:"https://material.io/tools/icons/static/icons/baseline-help_outline-24px.svg",alt:""}))}},147:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(4),i=a.n(l),o=a(33),c=a.n(o);a.d(t,"a",function(){return c.a});a(145),r.a.createContext({});i.a.object,i.a.string.isRequired,i.a.func,i.a.func},148:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(147);t.a=function(e){return r.a.createElement("div",{style:{margin:"3rem auto",maxWidth:650,padding:"0 1rem"}},!e.main&&r.a.createElement(l.a,{to:window.location.back()},"Back"),e.main&&r.a.createElement("h1",null,"Let It Go"),e.children)}},149:function(e,t,a){"use strict";a.r(t);a(34);var n=a(0),r=a.n(n),l=a(4),i=a.n(l),o=a(58),c=a(2),s=function(e){var t=e.location,a=c.default.getResourcesForPathnameSync(t.pathname);return a?r.a.createElement(o.a,Object.assign({location:t,pageResources:a},a.json)):null};s.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}).isRequired},t.default=s},150:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(146),i=r.a.createElement("div",{style:{textAlign:"left"}},"Check that you have:",r.a.createElement("ul",null,r.a.createElement("li",null,"Enabled your device's GPS settings",r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{style:{textShadow:"none"},href:"https://support.google.com/accounts/answer/3467281",rel:"noopener noreferrer",target:"_blank"},"Android")),r.a.createElement("li",null,r.a.createElement("a",{style:{textShadow:"none"},href:"https://support.apple.com/en-us/HT207092",rel:"noopener noreferrer",target:"_blank"},"iOS")),r.a.createElement("li",null,"Reload this page after enabling GPS settings"))),r.a.createElement("li",null,"Allowed your browser and this website the neccessary permissions to read your location",r.a.createElement("ul",null,r.a.createElement("li",null,"Press allow when a similar prompt as below appears"),r.a.createElement("li",null,"If such a prompt does not appear, reload the page")))),r.a.createElement("img",{src:"https://raw.githubusercontent.com/nelsontky/let-it-go/master/assets/misc/locationHelp.png",alt:""}));t.a=function(){return r.a.createElement("p",null,"Location not detected ",r.a.createElement(l.a,{content:i}))}},153:function(e,t,a){var n=a(78),r=a(55),l=a(35),i=a(74),o=a(26),c=a(76),s=Object.getOwnPropertyDescriptor;t.f=a(14)?s:function(e,t){if(e=l(e),t=i(t,!0),c)try{return s(e,t)}catch(a){}if(o(e,t))return r(!n.f.call(e,t),e[t])}},162:function(e,t,a){"use strict";var n=a(12),r=a(27),l=a(28),i=a(19),o=[].sort,c=[1,2,3];n(n.P+n.F*(i(function(){c.sort(void 0)})||!i(function(){c.sort(null)})||!a(163)(o)),"Array",{sort:function(e){return void 0===e?o.call(l(this)):o.call(l(this),r(e))}})},163:function(e,t,a){"use strict";var n=a(19);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},164:function(e,t,a){"use strict";var n=a(6),r=a(26),l=a(15),i=a(165),o=a(74),c=a(19),s=a(167).f,u=a(153).f,h=a(25).f,m=a(168).trim,d=n.Number,p=d,f=d.prototype,g="Number"==l(a(79)(f)),E="trim"in String.prototype,y=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){var a,n,r,l=(t=E?t.trim():m(t,3)).charCodeAt(0);if(43===l||45===l){if(88===(a=t.charCodeAt(2))||120===a)return NaN}else if(48===l){switch(t.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+t}for(var i,c=t.slice(2),s=0,u=c.length;s<u;s++)if((i=c.charCodeAt(s))<48||i>r)return NaN;return parseInt(c,n)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof d&&(g?c(function(){f.valueOf.call(a)}):"Number"!=l(a))?i(new p(y(t)),a,d):y(t)};for(var b,v=a(14)?s(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;v.length>C;C++)r(p,b=v[C])&&!r(d,b)&&h(d,b,u(p,b));d.prototype=f,f.constructor=d,a(16)(n,"Number",d)}},165:function(e,t,a){var n=a(11),r=a(166).set;e.exports=function(e,t,a){var l,i=t.constructor;return i!==a&&"function"==typeof i&&(l=i.prototype)!==a.prototype&&n(l)&&r&&r(e,l),e}},166:function(e,t,a){var n=a(11),r=a(5),l=function(e,t){if(r(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=a(20)(Function.call,a(153).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,a){return l(e,a),t?e.__proto__=a:n(e,a),e}}({},!1):void 0),check:l}},167:function(e,t,a){var n=a(77),r=a(56).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},168:function(e,t,a){var n=a(12),r=a(21),l=a(19),i=a(169),o="["+i+"]",c=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),u=function(e,t,a){var r={},o=l(function(){return!!i[e]()||"​"!="​"[e]()}),c=r[e]=o?t(h):i[e];a&&(r[a]=c),n(n.P+n.F*o,"String",r)},h=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(s,"")),e};e.exports=u},169:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},170:function(e,t,a){var n=a(12);n(n.S,"Number",{isInteger:a(171)})},171:function(e,t,a){var n=a(11),r=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&r(e)===e}}}]);
//# sourceMappingURL=component---src-pages-index-js-c050be7c5d8d9e14ded2.js.map