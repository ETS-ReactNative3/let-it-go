{"version":3,"sources":["webpack:///./src/components/map.js","webpack:///./src/components/paranoma.js","webpack:///./src/templates/toilet.js","webpack:///./src/components/layout.js"],"names":["Map","props","_React$Component","call","this","componentWillUnmount","clearInterval","timerID","getGeoLocation","_this","navigator","geolocation","getCurrentPosition","position","locationMarker","setPosition","lat","coords","latitude","lng","longitude","accuracyRadius","setCenter","getPosition","setRadius","accuracy","enableHighAccuracy","componentDidMount","_this2","setInterval","map","window","google","maps","document","getElementById","center","lon","zoom","Marker","icon","Circle","radius","fillColor","fillOpacity","strokeWeight","self","centerControlDiv","createElement","controlDiv","controlUI","style","backgroundColor","border","borderRadius","boxShadow","cursor","textAlign","marginBottom","height","title","appendChild","controlText","innerHTML","addEventListener","console","log","index","controls","ControlPosition","LEFT_BOTTOM","push","render","react_default","a","id","width","React","Component","Paranoma","hotSpots","maleYaw","pitch","yaw","type","text","name","femaleYaw","handicappedYaw","pannellum","viewer","panorama","paranomaUrl","startingYaw","vaov","maxPitch","minPitch","autoLoad","Helmet","rel","href","__webpack_exports__","_ref","data","toilets","layout","paranoma","query","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","children","margin","maxWidth","padding"],"mappings":"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","file":"component---src-templates-toilet-js-e0e0a8250d153ce416cb.js","sourcesContent":["import React from \"react\"\n// https://i.imgur.com/Rw0L7jC.png\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID)\n  }\n\n  getGeoLocation() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        position => {\n\n          this.locationMarker.setPosition({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          })\n\n          this.accuracyRadius.setCenter(this.locationMarker.getPosition())\n          this.accuracyRadius.setRadius(position.coords.accuracy)\n        },\n        () => {\n          //handleLocationError(true, infoWindow, map.getCenter());\n        },\n        { enableHighAccuracy: true }\n      )\n    } else {\n      // Browser doesn't support Geolocation\n      //handleLocationError(false, infoWindow, map.getCenter());\n    }\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(() => this.getGeoLocation(), 1000)\n\n    this.map = new window.google.maps.Map(document.getElementById(\"map\"), {\n      center: { lat: this.props.lat, lng: this.props.lon },\n      zoom: 17,\n    })\n\n    new window.google.maps.Marker({\n      position: { lat: this.props.lat, lng: this.props.lon },\n      map: this.map,\n    })\n\n    this.locationMarker = new window.google.maps.Marker({\n      map: this.map,\n      icon: `https://i.imgur.com/Rw0L7jC.png`,\n      position: { lat: this.props.lat, lng: this.props.lon },\n    })\n\n    this.accuracyRadius = new window.google.maps.Circle({\n      map: this.map,\n      center: { lat: this.props.lat, lng: this.props.lon },\n      radius: 0,\n      fillColor: \"#00F\",\n      fillOpacity: 0.2,\n      strokeWeight: 0,\n    })\n\n    // Location button\n    const self = this\n    function CenterControl(controlDiv, map) {\n      // Set CSS for the control border.\n      var controlUI = document.createElement(\"div\")\n      controlUI.style.backgroundColor = \"#fff\"\n      controlUI.style.border = \"2px solid #fff\"\n      controlUI.style.borderRadius = \"3px\"\n      controlUI.style.boxShadow = \"0 2px 6px rgba(0,0,0,.3)\"\n      controlUI.style.cursor = \"pointer\"\n      controlUI.style.textAlign = \"center\"\n      controlUI.style.marginBottom = '22px';\n      controlUI.style.height = \"31px\"\n      controlUI.title = \"Click to recenter the map to location\"\n      controlDiv.appendChild(controlUI)\n\n      // Set CSS for the control interior.\n      var controlText = document.createElement(\"div\")\n      controlText.innerHTML = \"<img src='https://i.imgur.com/raFRca2.png' />\"\n      controlUI.appendChild(controlText)\n\n      // Setup the click event listeners\n      controlUI.addEventListener(\"click\", function() {\n        map.setCenter(self.locationMarker.getPosition());\n      })\n    }\n\n    // Render the button\n    var centerControlDiv = document.createElement(\"div\")\n    new CenterControl(centerControlDiv, this.map)\n    console.log(centerControlDiv)\n\n    centerControlDiv.index = 1\n    this.map.controls[window.google.maps.ControlPosition.LEFT_BOTTOM].push(\n      centerControlDiv\n    )\n  }\n\n  render() {\n    return <div id=\"map\" style={{ width: \"100%\", height: 300 }} />\n  }\n}\n\nexport default Map\n","import React from \"react\"\nimport { Helmet } from \"react-helmet\"\n\nclass Paranoma extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n    // Determine hotspots\n    const hotSpots = []\n\n    if (this.props.maleYaw !== null) {\n      hotSpots.push({\n        pitch: 0,\n        yaw: this.props.maleYaw,\n        type: \"info\",\n        text: this.props.name + \" Male\",\n      })\n    }\n\n    if (this.props.femaleYaw !== null) {\n      hotSpots.push({\n        pitch: 0,\n        yaw: this.props.femaleYaw,\n        type: \"info\",\n        text: this.props.name + \" Female\",\n      })\n    }\n\n    if (this.props.handicappedYaw !== null) {\n      hotSpots.push({\n        pitch: 0,\n        yaw: this.props.handicappedYaw,\n        type: \"info\",\n        text: this.props.name + \" Handicapped\",\n      })\n    }\n\n    window.pannellum.viewer(\"panorama\", {\n      type: \"equirectangular\",\n      panorama: this.props.paranomaUrl,\n      yaw: this.props.startingYaw,\n      vaov: 45,\n      maxPitch: 0,\n      minPitch: 0,\n      autoLoad: true,\n      hotSpots\n    })\n  }\n\n  render() {\n    return (\n      <div>\n        <Helmet>\n          <link\n            rel=\"stylesheet\"\n            href=\"https://cdn.pannellum.org/2.4/pannellum.css\"\n          />\n        </Helmet>\n        <div id=\"panorama\" style={{ width: \"100%\", height: 200 }} />\n      </div>\n    )\n  }\n}\n\nexport default Paranoma\n","import React from \"react\"\nimport { graphql } from \"gatsby\"\nimport Layout from \"../components/layout\"\nimport Map from \"../components/map\"\nimport Paranoma from \"../components/paranoma\"\n\nexport default ({ data }) => {\n  const name = data.toilets.name\n  const lat = data.toilets.lat\n  const lon = data.toilets.lon\n  const paranomaUrl = data.toilets.paranomaUrl\n  const startingYaw = data.toilets.startingYaw\n  const maleYaw = data.toilets.maleYaw\n  const femaleYaw = data.toilets.femaleYaw\n  const handicappedYaw = data.toilets.handicappedYaw\n\n  return (\n    <Layout>\n      <h1>{name}</h1>\n      <Map lat={lat} lon={lon} />\n      <Paranoma\n        name={name}\n        paranomaUrl={paranomaUrl}\n        startingYaw={startingYaw}\n        maleYaw={maleYaw}\n        femaleYaw={femaleYaw}\n        handicappedYaw={handicappedYaw} />\n      <p>Todo</p>\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n  query($slug: String!) {\n    toilets(fields: { slug: { eq: $slug } }) {\n      name\n      lat\n      lon\n      paranomaUrl\n      startingYaw\n      maleYaw\n      femaleYaw\n      handicappedYaw\n    }\n  }\n`\n","import React from \"react\"\n\nexport default ({ children }) => (\n  <div style={{ margin: `3rem auto`, maxWidth: 650, padding: `0 1rem` }}>\n    {children}\n  </div>\n)\n"],"sourceRoot":""}