{"version":3,"sources":["webpack:///./src/components/map.js","webpack:///./src/templates/toilet.js","webpack:///./src/components/layout.js"],"names":["MapComponent","compose","withProps","googleMapURL","env","GATSBY_API","loadingElement","react_default","a","createElement","style","height","containerElement","mapElement","withScriptjs","withGoogleMap","props","lib","defaultZoom","center","lat","myLat","lng","myLon","position","lon","defaultCenter","radius","options","fillColor","fillOpacity","strokeOpacity","accuracy","MapView","_this","_React$Component","call","this","getGeoLocation","navigator","geolocation","getCurrentPosition","console","log","coords","setState","latitude","longitude","err","enableHighAccuracy","state","componentDidMount","_this2","timerID","setInterval","componentWillUnmount","clearInterval","render","React","Component","__webpack_exports__","_ref","data","name","toilets","layout","map","query","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","children","margin","maxWidth","padding"],"mappings":"uKAUMA,EAAeC,kBACnBC,oBAAU,CACRC,aAAY,+CAAiDC,IAAIC,WAArD,8BAEZC,eAAgBC,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAEC,OAAM,UACpCC,iBAAkBL,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAEC,OAAM,WACtCE,WAAYN,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAEC,OAAM,YAElCG,eACAC,gBATmBd,CAUnB,SAAAe,GAAK,OACLT,EAAAC,EAAAC,cAACQ,EAAA,UAAD,CAAWC,YAAa,GAAIC,OAAQ,CAAEC,IAAKJ,EAAMK,MAAOC,IAAKN,EAAMO,QAChEhB,EAAAC,EAAAC,cAACQ,EAAA,OAAD,CAAQO,SAAU,CAAEJ,IAAKJ,EAAMI,IAAKE,IAAKN,EAAMS,OAE9ClB,EAAAC,EAAAC,cAACQ,EAAA,OAAD,CACES,cAAe,CAAEN,IAAKJ,EAAMI,IAAKE,IAAKN,EAAMS,KAC5CE,OAAQ,EACRC,QAAS,CACPC,UAAW,OACXC,YAAa,EACbC,cAAe,KAKnBxB,EAAAC,EAAAC,cAACQ,EAAA,OAAD,CACEE,OAAQ,CAAEC,IAAKJ,EAAMK,MAAOC,IAAKN,EAAMO,OACvCI,OAAQX,EAAMgB,SACdJ,QAAS,CACPC,UAAW,OACXC,YAAa,GACbC,cAAe,QAqDVE,cA7Cb,SAAAA,EAAYjB,GAAO,IAAAkB,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMrB,IAANqB,MAQFC,eAAiB,WACf,OAAOC,UAAUC,YAAYC,mBAC3B,SAAAjB,GACEkB,QAAQC,IAAInB,EAASoB,QACrBV,EAAKW,SAAS,CACZxB,MAAOG,EAASoB,OAAOE,SACvBvB,MAAOC,EAASoB,OAAOG,UACvBf,SAAUR,EAASoB,OAAOZ,YAG9B,SAAAgB,GAAG,OAAIN,QAAQC,IAAIK,IACnB,CAAEC,oBAAoB,KAlBxBf,EAAKgB,MAAQ,CACX7B,MAAOL,EAAMI,IACbG,MAAOP,EAAMS,IACbO,SAAU,GALKE,sCAwBnBiB,kBAAA,WAAoB,IAAAC,EAAAf,KAClBA,KAAKgB,QAAUC,YAAY,kBAAMF,EAAKd,kBAAkB,QAG1DiB,qBAAA,WACEC,cAAcnB,KAAKgB,YAGrBI,OAAA,WACE,OACElD,EAAAC,EAAAC,cAACT,EAAD,CACEoB,IAAKiB,KAAKrB,MAAMI,IAChBK,IAAKY,KAAKrB,MAAMS,IAChBJ,MAAOgB,KAAKa,MAAM7B,MAClBE,MAAOc,KAAKa,MAAM3B,MAClBS,SAAUK,KAAKa,MAAMlB,eAxCP0B,IAAMC,+CC3CbC,EAAA,iBAAAC,GAAc,IAAXC,EAAWD,EAAXC,KACVC,EAAOD,EAAKE,QAAQD,KACpB3C,EAAM0C,EAAKE,QAAQ5C,IACnBK,EAAMqC,EAAKE,QAAQvC,IAEzB,OACElB,EAAAC,EAAAC,cAACwD,EAAA,EAAD,KACE1D,EAAAC,EAAAC,cAAA,UAAKsD,GACLxD,EAAAC,EAAAC,cAACyD,EAAD,CAAK9C,IAAKA,EAAKK,IAAKA,IACpBlB,EAAAC,EAAAC,cAAA,mBATS,IAcF0D,EAAK,+CCnBlB,IAAAC,EAAAC,EAAA,GAAAC,EAAAD,EAAAE,EAAAH,GAEeR,EAAA,WAAAC,GAAA,IAAGW,EAAHX,EAAGW,SAAH,OACbF,EAAA9D,EAAAC,cAAA,OAAKC,MAAO,CAAE+D,OAAM,YAAeC,SAAU,IAAKC,QAAO,WACtDH","file":"component---src-templates-toilet-js-7b7c7d4a8e2ad0881b72.js","sourcesContent":["import React from \"react\"\nimport { compose, withProps } from \"recompose\"\nimport {\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n  Marker,\n  Circle,\n} from \"react-google-maps\"\n\nconst MapComponent = compose(\n  withProps({\n    googleMapURL: `https://maps.googleapis.com/maps/api/js?key=${env.GATSBY_API}\n        &callback=initMap`,\n    loadingElement: <div style={{ height: `100%` }} />,\n    containerElement: <div style={{ height: `400px` }} />,\n    mapElement: <div style={{ height: `100%` }} />,\n  }),\n  withScriptjs,\n  withGoogleMap\n)(props => (\n  <GoogleMap defaultZoom={17} center={{ lat: props.myLat, lng: props.myLon }}>\n    {<Marker position={{ lat: props.lat, lng: props.lon }} />}\n    {\n      <Circle\n        defaultCenter={{ lat: props.lat, lng: props.lon }}\n        radius={7}\n        options={{\n          fillColor: \"#00f\",\n          fillOpacity: 1.0,\n          strokeOpacity: 0.0,\n        }}\n      />\n    }\n    {\n      <Circle\n        center={{ lat: props.myLat, lng: props.myLon }}\n        radius={props.accuracy}\n        options={{\n          fillColor: \"#00f\",\n          fillOpacity: 0.2,\n          strokeOpacity: 0.0,\n        }}\n      />\n    }\n  </GoogleMap>\n))\n\nclass MapView extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      myLat: props.lat,\n      myLon: props.lon,\n      accuracy: 0,\n    }\n  }\n\n  getGeoLocation = () => {\n    return navigator.geolocation.getCurrentPosition(\n      position => {\n        console.log(position.coords)\n        this.setState({\n          myLat: position.coords.latitude,\n          myLon: position.coords.longitude,\n          accuracy: position.coords.accuracy,\n        })\n      },\n      err => console.log(err),\n      { enableHighAccuracy: true }\n    )\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(() => this.getGeoLocation(), 1000)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID)\n  }\n\n  render() {\n    return (\n      <MapComponent\n        lat={this.props.lat}\n        lon={this.props.lon}\n        myLat={this.state.myLat}\n        myLon={this.state.myLon}\n        accuracy={this.state.accuracy}\n      />\n    )\n  }\n}\n\nexport default MapView\n","import React from \"react\"\nimport { graphql } from \"gatsby\"\nimport Layout from \"../components/layout\"\nimport Map from \"../components/map\"\n\nexport default ({ data }) => {\n  const name = data.toilets.name\n  const lat = data.toilets.lat\n  const lon = data.toilets.lon\n\n  return (\n    <Layout>\n      <h1>{name}</h1>\n      <Map lat={lat} lon={lon} />\n      <p>Todo</p>\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n  query($slug: String!) {\n    toilets(fields: { slug: { eq: $slug } }) {\n      name\n      lat\n      lon\n    }\n  }\n`\n","import React from \"react\"\n\nexport default ({ children }) => (\n  <div style={{ margin: `3rem auto`, maxWidth: 650, padding: `0 1rem` }}>\n    {children}\n  </div>\n)\n"],"sourceRoot":""}