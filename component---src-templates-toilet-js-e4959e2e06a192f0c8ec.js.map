{"version":3,"sources":["webpack:///./src/components/backButton.js","webpack:///./src/components/shareButton.js","webpack:///./src/components/map.js","webpack:///./src/components/paranoma.js","webpack:///./src/utils/firebase.js","webpack:///./src/components/stars.js","webpack:///./src/components/starsStatic.js","webpack:///./src/components/reviews.js","webpack:///./src/templates/toilet.js","webpack:///./.cache/public-page-renderer.js","webpack:///./src/utils/utils.js","webpack:///./src/components/helpButton.js","webpack:///./src/components/layout.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/locationHelp.js","webpack:///./src/components/paginatedArray.js"],"names":["BackButton","props","_this","_React$Component","call","this","state","localWindow","componentDidMount","setState","window","render","_this2","react_default","a","createElement","gatsby_browser_entry","to","history","onClick","back","style","utils","React","Component","ShareButton","copyText","event","preventDefault","refs","input","select","document","execCommand","url","name","replace","content","textAlign","color","border","onSubmit","ref","type","value","readOnly","src","width","height","overflow","scrolling","frameBorder","allowtransparency","allow","title","esm","trigger","placement","interactive","arrow","verticalAlign","alt","Map","isLocationAvailable","watchLocation","bind","assertThisInitialized_default","componentWillUnmount","navigator","geolocation","clearWatch","id","watchPosition","position","locationMarker","setPosition","lat","coords","latitude","lng","longitude","accuracyRadius","setCenter","getPosition","setRadius","accuracy","enableHighAccuracy","map","google","maps","getElementById","center","lon","zoom","gestureHandling","Marker","icon","Circle","radius","fillColor","fillOpacity","strokeWeight","self","centerControlDiv","controlDiv","controlUI","backgroundColor","borderRadius","boxShadow","cursor","marginBottom","appendChild","controlText","innerHTML","addEventListener","index","controls","ControlPosition","LEFT_BOTTOM","push","locationHelp","Paranoma","viewer","pannellum","panorama","paranomaUrl","vaov","maxPitch","minPitch","autoLoad","destroy","Helmet","rel","href","firebase","require","instance","firebaseConfig","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","Firebase","initializeApp","db","firestore","auth","Stars","isClicked","starsState","className","handleStarClick","StarsStatic","score","fontSize","ReviewText","review","length","len","slice","isTooLong","sortBy","key","SingleReview","children","photoURL","handleEdit","handleDelete","starsStatic","date","reviews_ReviewText","Reviews","_React$Component3","reviews","otherReviews","isSignedIn","myReview","reviewsLoading","pageNumber","inputBoxShown","starsKey","paginateKey","handleChange","handleSubmit","handleSort","handlePageChange","_this3","ui","firebaseui","AuthUI","snapshot","collection","doc","onSnapshot","querySnapshot","forEach","data","sort","b","toDate","currentUser","filter","x","uid","uiConfig","signInOptions","GoogleAuthProvider","PROVIDER_ID","callbacks","signInSuccessWithAuthResult","start","stopAuthListener","onAuthStateChanged","user","target","set","displayName","Date","_this4","i","_this5","confirm","delete","then","parseInt","_this6","reviewsCopy","r1","r2","_this7","reduce","toFixed","signOut","location","reload","stars","resize","onChange","placeholder","disabled","trim","borderStyle","borderColor","borderWidth","reviews_SingleReview","tableLayout","paginatedArray","pageSize","columns","__webpack_exports__","_ref","toilets","glanceStyle","pred","textDecoration","layout","main","backButton","shareButton","paranoma","listStyle","query","m","module","exports","default","latLonToMetres","lat1","lon1","lat2","lon2","dLat","Math","PI","dLon","sin","cos","d","atan2","sqrt","round","appendMetres","distance","Number","isInteger","hasMaleToilet","toilet","facilities","male","hasFemaleToilet","female","hasHandicappedToilet","handicapped","hasSeparateHandicappedToilet","separateHandicapped","toiletHasHose","hose","toiletHasShowerHeads","showerHeads","toiletHasWaterCooler","waterCooler","buttonToLinkStyle","size","display","margin","padding","howLongAgo","diff","abs","now","sec","floor","min","hour","day","week","month","toLocaleString","year","starsStateToScore","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_tippy_js_react__WEBPACK_IMPORTED_MODULE_1__","HelpButton","maxWidth","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","createContext","PropTypes","object","string","isRequired","func","ProdPageRenderer","pageResources","loader","getResourcesForPathnameSync","pathname","InternalPageRenderer","Object","assign","json","propTypes","shape","_helpButton__WEBPACK_IMPORTED_MODULE_1__","textShadow","PaginatedArray","pageButtons","ceil","pages","acc","currentValue","react__WEBPACK_IMPORTED_MODULE_1___default","colSpan"],"mappings":"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","file":"component---src-templates-toilet-js-e4959e2e06a192f0c8ec.js","sourcesContent":["import React from \"react\"\nimport { Link } from \"gatsby\"\nimport * as utils from \"../utils/utils\"\n\nclass BackButton extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { localWindow: null }\n  }\n  componentDidMount() {\n    this.setState({\n      localWindow: window,\n    })\n  }\n\n  render() {\n    if (this.state.localWindow == null) {\n      return <Link to={\"/\"}>Back</Link>\n    } else {\n      return this.state.localWindow.history.state == null ? (\n        <Link to={\"/\"}>Back</Link>\n      ) : (\n        <button\n          onClick={() => this.state.localWindow.history.back()}\n          style={utils.buttonToLinkStyle(\"#1ca086\", \"100%\")}\n        >\n          Back\n        </button>\n      )\n    }\n  }\n}\n\nexport default BackButton\n","import React from \"react\"\nimport Tippy from \"@tippy.js/react\"\n\nclass ShareButton extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      url: `https://nelsontky.github.io/let-it-go/${this.props.name.replace(\n        /\\s/g,\n        \"\"\n      )}`,\n    }\n  }\n\n  copyText = event => {\n    event.preventDefault()\n\n    this.refs.input.select()\n\n    document.execCommand(\"copy\")\n\n    return false\n  }\n\n  render() {\n    const content = (\n      <div style={{ textAlign: \"left\" }}>\n        <h4 style={{ color: \"white\" }}>Share</h4>\n        <hr style={{ border: \"1px solid white\" }} />\n        Love/Hate <strong>{this.props.name}</strong>? Share your Let It Go\n        experience on social media! <br />\n        (psst... try not to look suspicious in the toilet with your phone ok?)\n        <div style={{ textAlign: \"center\" }}>\n          <form onSubmit={this.copyText}>\n            <input ref=\"input\" type=\"text\" value={this.state.url} readOnly />\n            <input type=\"submit\" value=\"Copy\" />\n          </form>\n          <iframe\n            src={`https://www.facebook.com/plugins/share_button.php?href=${\n              this.state.url\n            }&layout=button&size=small&width=58&height=20&appId`}\n            width=\"60\"\n            height=\"20\"\n            style={{ border: \"none\", overflow: \"hidden\" }}\n            scrolling=\"no\"\n            frameBorder=\"0\"\n            allowtransparency=\"true\"\n            allow=\"encrypted-media\"\n            title=\"fb\"\n          />\n          <iframe\n            height=\"20\"\n            width=\"62\"\n            style={{ border: \"none\", overflow: \"hidden\" }}\n            scrolling=\"no\"\n            frameBorder=\"0\"\n            allowtransparency=\"true\"\n            allow=\"encrypted-media\"\n            src={`https://platform.twitter.com/widgets/tweet_button.html?url=${\n              this.state.url\n            }`}\n            title=\"tweet\"\n          />\n        </div>\n      </div>\n    )\n    return (\n      <Tippy\n        content={content}\n        trigger=\"click\"\n        placement=\"bottom\"\n        interactive={true}\n        arrow={true}\n      >\n        <img\n          style={{ verticalAlign: \"bottom\" }}\n          src=\"https://material.io/tools/icons/static/icons/twotone-share-24px.svg\"\n          alt=\"\"\n        />\n      </Tippy>\n    )\n  }\n}\n\nexport default ShareButton\n","import React from \"react\"\nimport LocationHelp from \"./locationHelp\"\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLocationAvailable: false,\n    }\n\n    this.watchLocation = this.watchLocation.bind(this)\n  }\n  componentWillUnmount() {\n    navigator.geolocation.clearWatch(this.id)\n  }\n\n  watchLocation() {\n    if (navigator.geolocation) {\n      this.id = navigator.geolocation.watchPosition(\n        position => {\n          this.locationMarker.setPosition({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          })\n          this.setState({\n            isLocationAvailable: true,\n          })\n\n          this.accuracyRadius.setCenter(this.locationMarker.getPosition())\n          this.accuracyRadius.setRadius(position.coords.accuracy)\n        },\n        () => {\n          this.setState({\n            isLocationAvailable: false,\n          })\n        },\n        { enableHighAccuracy: true }\n      )\n    } else {\n      // Browser doesn't support Geolocation\n      this.setState({\n        isLocationAvailable: false,\n      })\n    }\n  }\n\n  componentDidMount() {\n\n\n    this.map = new window.google.maps.Map(document.getElementById(\"map\"), {\n      center: { lat: this.props.lat, lng: this.props.lon },\n      zoom: 17,\n      gestureHandling: \"cooperative\",\n    })\n\n    new window.google.maps.Marker({\n      position: { lat: this.props.lat, lng: this.props.lon },\n      map: this.map,\n    })\n\n    this.locationMarker = new window.google.maps.Marker({\n      map: this.map,\n      icon: `https://i.imgur.com/Rw0L7jC.png`,\n      position: { lat: this.props.lat, lng: this.props.lon },\n    })\n\n    this.accuracyRadius = new window.google.maps.Circle({\n      map: this.map,\n      center: { lat: this.props.lat, lng: this.props.lon },\n      radius: 0,\n      fillColor: \"#00F\",\n      fillOpacity: 0.2,\n      strokeWeight: 0,\n    })\n\n    // Location button\n    const self = this\n    function CenterControl(controlDiv, map) {\n      // Set CSS for the control border.\n      let controlUI = document.createElement(\"div\")\n      controlUI.style.backgroundColor = \"#fff\"\n      controlUI.style.border = \"2px solid #fff\"\n      controlUI.style.borderRadius = \"3px\"\n      controlUI.style.boxShadow = \"0 2px 6px rgba(0,0,0,.3)\"\n      controlUI.style.cursor = \"pointer\"\n      controlUI.style.textAlign = \"center\"\n      controlUI.style.marginBottom = \"22px\"\n      controlUI.style.height = \"31px\"\n      controlUI.title = \"Click to recenter the map to location\"\n      controlDiv.appendChild(controlUI)\n\n      // Set CSS for the control interior.\n      let controlText = document.createElement(\"div\")\n      controlText.innerHTML = \"<img src='https://i.imgur.com/raFRca2.png' />\"\n      controlUI.appendChild(controlText)\n\n      // Setup the click event listeners\n      controlUI.addEventListener(\"click\", function() {\n        map.setCenter(self.locationMarker.getPosition())\n      })\n    }\n\n    // Render the button\n    let centerControlDiv = document.createElement(\"div\")\n    new CenterControl(centerControlDiv, this.map)\n\n    centerControlDiv.index = 1\n    this.map.controls[window.google.maps.ControlPosition.LEFT_BOTTOM].push(\n      centerControlDiv\n    )\n    this.watchLocation()\n  }\n\n  render() {\n    return (\n      <div>\n        {!this.state.isLocationAvailable && (\n          <LocationHelp />\n        )}\n        <div id=\"map\" style={{ width: \"100%\", height: 300 }} />\n      </div>\n    )\n  }\n}\n\nexport default Map\n","import React from \"react\"\nimport { Helmet } from \"react-helmet\"\n\nclass Paranoma extends React.Component {\n  componentDidMount() {\n    this.viewer = window.pannellum.viewer(\"panorama\", {\n      type: \"equirectangular\",\n      panorama: this.props.paranomaUrl,\n      vaov: 45,\n      maxPitch: 0,\n      minPitch: 0,\n      autoLoad: true,\n    })\n  }\n  \n  componentWillUnmount() {                                                     \n    this.viewer.destroy();                                             \n  }                      \n\n  render() {\n    return (\n      <div>\n        <Helmet>\n          <link\n            rel=\"stylesheet\"\n            href=\"https://cdn.pannellum.org/2.4/pannellum.css\"\n          />\n        </Helmet>\n        <div id=\"panorama\" style={{ width: \"100%\", height: 200 }} />\n      </div>\n    )\n  }\n}\n\nexport default Paranoma\n","var firebase = require(\"firebase/app\")\nrequire(\"firebase/auth\")\nrequire(\"firebase/firestore\")\nconst firebaseConfig = {\n  apiKey: `${process.env.GATSBY_GOOGLE_MAPS_API}`,\n  authDomain: \"let-it-go-e6229.firebaseapp.com\",\n  databaseURL: \"https://let-it-go-e6229.firebaseio.com\",\n  projectId: \"let-it-go-e6229\",\n  storageBucket: \"let-it-go-e6229.appspot.com\",\n  messagingSenderId: \"917575844853\",\n  appId: \"1:917575844853:web:88ec0cbe059a0d43\"\n};\nlet instance\n\nclass Firebase {\n  constructor() {\n    if (instance) {\n      return instance\n    }\n    firebase.initializeApp(firebaseConfig)\n    this.db = firebase.firestore()\n    this.auth = firebase.auth()\n    this.firebase = firebase\n    instance = this\n  }\n}\n\nexport default Firebase\n","import React from \"react\"\n\nclass Stars extends React.Component {\n  constructor(props) {\n    super(props)\n    this.isClicked = this.isClicked.bind(this)\n  }\n\n  isClicked(index) {\n    return this.props.starsState[index] ? { color: \"orange\" } : {}\n  }\n\n  render() {\n    // CSS defined in parent class\n    return (\n      <div>\n        <i\n          id=\"0\"\n          className=\"fas fa-star\"\n          style={this.isClicked(0)}\n          onClick={this.props.handleStarClick}\n        />\n        <i\n          id=\"1\"\n          className=\"fas fa-star\"\n          style={this.isClicked(1)}\n          onClick={this.props.handleStarClick}\n        />\n        <i\n          id=\"2\"\n          className=\"fas fa-star\"\n          style={this.isClicked(2)}\n          onClick={this.props.handleStarClick}\n        />\n        <i\n          id=\"3\"\n          className=\"fas fa-star\"\n          style={this.isClicked(3)}\n          onClick={this.props.handleStarClick}\n        />\n        <i\n          id=\"4\"\n          className=\"fas fa-star\"\n          style={this.isClicked(4)}\n          onClick={this.props.handleStarClick}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Stars\n","import React from \"react\"\n\nclass StarsStatic extends React.Component {\n  constructor(props) {\n    super(props)\n    this.isClicked = this.isClicked.bind(this)\n  }\n\n  isClicked(index) {\n    return index < this.props.score\n      ? { color: \"orange\", fontSize: \"80%\" }\n      : { fontSize: \"80%\" }\n  }\n\n  render() {\n    // CSS defined in parent class\n    return (\n      <span>\n        <i id=\"0\" className=\"fas fa-star\" style={this.isClicked(0)} />\n        <i id=\"1\" className=\"fas fa-star\" style={this.isClicked(1)} />\n        <i id=\"2\" className=\"fas fa-star\" style={this.isClicked(2)} />\n        <i id=\"3\" className=\"fas fa-star\" style={this.isClicked(3)} />\n        <i id=\"4\" className=\"fas fa-star\" style={this.isClicked(4)} />\n      </span>\n    )\n  }\n}\n\nexport default StarsStatic\n","import React from \"react\"\nimport Firebase from \"../utils/firebase\"\nimport * as utils from \"../utils/utils\"\nimport { Helmet } from \"react-helmet\"\nimport Stars from \"../components/stars\"\nimport StarsStatic from \"../components/starsStatic\"\nimport PaginatedArray from \"../components/paginatedArray\"\n\nclass ReviewText extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.len = 240\n\n    this.state = {\n      review: this.props.review.slice(0, this.len),\n      isTooLong: this.props.review.length > this.len,\n      sortBy: \"newest\",\n    }\n  }\n\n  onClick = () => {\n    if (this.state.review.length > this.len) {\n      this.setState({\n        review: this.props.review.slice(0, this.len),\n      })\n    } else {\n      this.setState({\n        review: this.props.review,\n      })\n    }\n  }\n\n  render() {\n    return (\n      <div key={this.props.review}>\n        {this.props.review.length > this.len &&\n        this.state.review.length <= this.len\n          ? this.state.review + \"...\"\n          : this.state.review}\n        {this.state.isTooLong && (\n          <div>\n            <button\n              style={utils.buttonToLinkStyle(\"#1ca086\", \"60%\")}\n              onClick={this.onClick}\n            >\n              {this.state.review.length > this.len ? \"Show less\" : \"Show more\"}\n            </button>\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nclass SingleReview extends React.Component {\n  render() {\n    return (\n      <span>\n        <img\n          src={this.props.children.photoURL}\n          alt={this.props.children.name}\n          width={36}\n          height={36}\n          style={{ verticalAlign: \"top\" }}\n        />\n        <strong style={{ color: \"blue\", fontSize: \"80%\" }}>\n          {\" \" + this.props.children.name}\n        </strong>\n\n        {/* Edit button (if shown) */}\n        {this.props.handleEdit != null && (\n          <span style={{ color: \"gray\", fontSize: \"80%\" }}>\n            {\" • \"}\n            <button\n              onClick={this.props.handleEdit}\n              style={utils.buttonToLinkStyle(\"#1ca086\", \"100%\")}\n            >\n              Edit\n            </button>\n          </span>\n        )}\n\n        {/* Delete button (if shown) */}\n        {this.props.handleDelete != null && (\n          <span style={{ color: \"gray\", fontSize: \"80%\" }}>\n            {\" • \"}\n            <button\n              onClick={this.props.handleDelete}\n              style={utils.buttonToLinkStyle(\"red\", \"100%\")}\n            >\n              Delete\n            </button>\n          </span>\n        )}\n\n        <br />\n        <span>\n          <StarsStatic score={this.props.children.score} />\n          <span style={{ color: \"gray\", fontSize: \"80%\" }}>\n            {\" \" + utils.howLongAgo(this.props.children.date)}\n          </span>\n        </span>\n        <br />\n        <ReviewText review={this.props.children.review} />\n      </span>\n    )\n  }\n}\n\nclass Reviews extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      reviews: [],\n      otherReviews: [],\n      isSignedIn: false,\n      myReview: \"\",\n      reviewsLoading: true,\n      starsState: [false, false, false, false, false],\n      pageNumber: 1,\n      inputBoxShown: true,\n    }\n    this.starsKey = 0\n    this.paginateKey = 0\n\n    this.handleChange = this.handleChange.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.handleEdit = this.handleEdit.bind(this)\n    this.handleDelete = this.handleDelete.bind(this)\n    this.handleStarClick = this.handleStarClick.bind(this)\n    this.handleSort = this.handleSort.bind(this)\n    this.handlePageChange = this.handlePageChange.bind(this)\n  }\n\n  componentDidMount() {\n    this.firebase = new Firebase()\n\n    this.db = this.firebase.db\n    this.auth = this.firebase.auth\n    if (this.firebase.ui == null) {\n      const firebaseui = require(\"firebaseui\")\n      this.firebase.ui = new firebaseui.auth.AuthUI(this.auth)\n    }\n\n    this.snapshot = this.db\n      .collection(\"reviews\")\n      .doc(this.props.name)\n      .collection(\"users\")\n      .onSnapshot(querySnapshot => {\n        let reviews = []\n        querySnapshot.forEach(doc => {\n          reviews.push(doc.data().review)\n        })\n        reviews.sort((a, b) => b.date.toDate() - a.date.toDate())\n        this.setState({\n          reviews,\n          reviewsLoading: false,\n          inputBoxShown:\n            this.auth.currentUser != null &&\n            reviews.filter(x => x.uid === this.auth.currentUser.uid).length !==\n              1,\n          otherReviews:\n            this.auth.currentUser == null\n              ? reviews\n              : reviews.filter(x => x.uid !== this.auth.currentUser.uid),\n        })\n      })\n\n    this.uiConfig = {\n      signInOptions: [\n        this.firebase.firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n      ],\n      callbacks: {\n        // Avoid redirects after sign-in.\n        signInSuccessWithAuthResult: () => false,\n      },\n    }\n    this.firebase.ui.start(\"#firebaseui-auth-container\", this.uiConfig)\n\n    this.stopAuthListener = this.auth.onAuthStateChanged(user => {\n      this.setState({\n        isSignedIn: !!user,\n        otherReviews:\n          this.auth.currentUser == null\n            ? this.state.reviews\n            : this.state.reviews.filter(\n                x => x.uid !== this.auth.currentUser.uid\n              ),\n      })\n    })\n  }\n\n  handleChange(event) {\n    this.setState({ myReview: event.target.value })\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n\n    this.db\n      .collection(\"reviews\")\n      .doc(this.props.name)\n      .collection(\"users\")\n      .doc(this.auth.currentUser.uid)\n      .set({\n        review: {\n          name: this.auth.currentUser.displayName,\n          photoURL: this.auth.currentUser.photoURL,\n          review: this.state.myReview,\n          date: new Date(),\n          uid: this.auth.currentUser.uid,\n          score: utils.starsStateToScore(this.state.starsState),\n        },\n      })\n\n    this.setState({\n      myReview: \"\",\n      starsState: [false, false, false, false, false],\n      sortBy: \"newest\",\n      pageNumber: 1,\n    })\n  }\n\n  handleEdit() {\n    const review = this.state.reviews.filter(\n      x => x.uid === this.auth.currentUser.uid\n    )[0]\n\n    this.setState({\n      myReview: review.review,\n      starsState: [true, true, true, true, true].map(\n        (x, i) => i < review.score\n      ),\n      inputBoxShown: true,\n    })\n  }\n\n  handleDelete() {\n    if (window.confirm(`Are you sure you want to delete your review?`)) {\n      this.db\n        .collection(\"reviews\")\n        .doc(this.props.name)\n        .collection(\"users\")\n        .doc(this.auth.currentUser.uid)\n        .delete()\n        .then(() => this.setState({ inputBoxShown: true }))\n    }\n  }\n\n  handleStarClick(event) {\n    const starsState = this.state.starsState\n      .slice()\n      .map((x, i) => i <= parseInt(event.target.id))\n\n    this.setState({\n      starsState,\n    })\n  }\n\n  handleSort(event) {\n    let reviewsCopy = this.state.reviews.slice()\n    if (event.target.value === \"newest\") {\n      reviewsCopy.sort((r1, r2) => r2.date.toDate() - r1.date.toDate())\n    } else if (event.target.value === \"lowest\") {\n      reviewsCopy.sort((r1, r2) => r1.score - r2.score)\n    } else {\n      reviewsCopy.sort((r1, r2) => r2.score - r1.score)\n    }\n\n    this.setState({\n      reviews: reviewsCopy,\n      sortBy: event.target.value,\n      pageNumber: 1,\n      otherReviews:\n        this.auth.currentUser == null\n          ? reviewsCopy\n          : reviewsCopy.filter(x => x.uid !== this.auth.currentUser.uid),\n    })\n  }\n\n  handlePageChange(event) {\n    this.setState({ pageNumber: parseInt(event.target.id) })\n  }\n\n  componentWillUnmount() {\n    this.snapshot()\n    this.stopAuthListener()\n  }\n\n  render() {\n    return (\n      <div>\n        <Helmet>\n          <link\n            type=\"text/css\"\n            rel=\"stylesheet\"\n            href=\"https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css\"\n          />\n          <link\n            rel=\"stylesheet\"\n            href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css\"\n          />\n        </Helmet>\n        <h4>Reviews</h4>\n\n        {/* Average ratings */}\n        {!this.state.reviewsLoading && this.state.reviews.length !== 0 && (\n          <span>\n            <i className=\"fas fa-star\" style={{ color: \"orange\" }} />{\" \"}\n            {(\n              this.state.reviews.reduce((a, x) => a + x.score, 0) /\n              this.state.reviews.length\n            ).toFixed(1)}\n          </span>\n        )}\n        {!this.state.isSignedIn && (\n          <div>\n            <div id=\"firebaseui-auth-container\" />\n            <p\n              style={{ fontSize: \"0.7em\", color: \"gray\", textAlign: \"center\" }}\n            >\n              Sign in with Google to post a review!\n            </p>\n          </div>\n        )}\n        {/* Signed in message */}\n        {this.state.isSignedIn && !this.state.reviewsLoading && (\n          <div>\n            <p>\n              Welcome {this.auth.currentUser.displayName}! You are now\n              signed-in!{\" \"}\n              <button\n                onClick={() => {\n                  this.auth.signOut()\n                  window.location.reload()\n                }}\n              >\n                Sign-out\n              </button>\n            </p>\n\n            {/* Comment input box/My review */}\n\n            {this.state.inputBoxShown ||\n            this.state.otherReviews.length === this.state.reviews.length ? (\n              <form onSubmit={this.handleSubmit}>\n                <Stars\n                  handleStarClick={this.handleStarClick}\n                  starsState={this.state.starsState}\n                  key={this.starsKey++}\n                />\n                <textarea\n                  style={{ width: \"100%\", resize: \"none\", height: \"75px\" }}\n                  value={this.state.myReview}\n                  onChange={this.handleChange}\n                  placeholder=\"Write a review...\"\n                />\n                <input\n                  type=\"submit\"\n                  value=\"Submit\"\n                  disabled={\n                    this.state.myReview.trim() === \"\" ||\n                    utils.starsStateToScore(this.state.starsState) === 0\n                  }\n                />\n              </form>\n            ) : (\n              <div\n                style={{\n                  borderStyle: \"solid\",\n                  borderColor: \"grey\",\n                  borderWidth: \"1px\",\n                }}\n              >\n                <SingleReview\n                  handleEdit={this.handleEdit}\n                  handleDelete={this.handleDelete}\n                >\n                  {\n                    this.state.reviews.filter(\n                      x => x.uid === this.auth.currentUser.uid\n                    )[0]\n                  }\n                </SingleReview>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Sorting dropdown */}\n        <br />\n        {!this.state.reviewsLoading && this.state.otherReviews.length !== 0 && (\n          <div>\n            <label>\n              Sort by:{\" \"}\n              <select value={this.state.sortBy} onChange={this.handleSort}>\n                <option value=\"newest\">Newest</option>\n                <option value=\"highest\">Highest Rating</option>\n                <option value=\"lowest\">Lowest Rating</option>\n              </select>\n            </label>\n          </div>\n        )}\n        {/* Comments start here */}\n        <table style={{ tableLayout: \"fixed\" }}>\n          {this.state.otherReviews.length === 0 ? (\n            <tbody>\n              <tr key={1}>\n                <td>\n                  {!this.state.reviewsLoading ? (\n                    <p>\n                      No{\" \"}\n                      {this.state.otherReviews.length <\n                        this.state.reviews.length && \"other\"}{\" \"}\n                      reviews (yet!)\n                    </p>\n                  ) : (\n                    <p>Reviews are loading...</p>\n                  )}\n                </td>\n              </tr>\n            </tbody>\n          ) : (\n            <PaginatedArray\n              key={this.paginateKey++}\n              pageSize={8}\n              pageNumber={this.state.pageNumber}\n              handlePageChange={this.handlePageChange}\n              columns={1}\n            >\n              {this.state.otherReviews.map((x, i) => {\n                return (\n                  <tr key={i}>\n                    <td>\n                      <SingleReview>{x}</SingleReview>\n                    </td>\n                  </tr>\n                )\n              })}\n            </PaginatedArray>\n          )}\n        </table>\n      </div>\n    )\n  }\n}\n\nexport default Reviews\n","import React from \"react\"\nimport { graphql } from \"gatsby\"\nimport Layout from \"../components/layout\"\nimport BackButton from \"../components/backButton\"\nimport ShareButton from \"../components/shareButton\"\nimport * as utils from \"../utils/utils\"\nimport Map from \"../components/map\"\nimport Paranoma from \"../components/paranoma\"\nimport { Helmet } from \"react-helmet\"\nimport Reviews from \"../components/reviews\"\n\nexport default ({ data }) => {\n  const name = data.toilets.name\n  const lat = data.toilets.lat\n  const lon = data.toilets.lon\n  const paranomaUrl = data.toilets.paranomaUrl\n\n  function glanceStyle(pred) {\n    return {\n      textDecoration: pred(data.toilets) ? \"\" : \"line-through\",\n      color: pred(data.toilets) ? \"\" : \"gray\",\n    }\n  }\n\n  function handicappedText() {\n    if (!utils.hasHandicappedToilet(data.toilets)) {\n      return \"Is handicapped accessible\"\n    } else if (!utils.hasSeparateHandicappedToilet(data.toilets))\n      return \"Is handicapped accessible (Handicapped cubicle inside toilet)\"\n    else {\n      return \"Is handicapped accessible (Has separate handicapped toilet)\"\n    }\n  }\n\n  return (\n    <Layout main={false}>\n      <Helmet>\n        <title>{name}</title>\n      </Helmet>\n      <BackButton />\n      <h3>{name}</h3>\n      <ShareButton name={name} />\n      <Map lat={lat} lon={lon} />\n      <Paranoma name={name} paranomaUrl={paranomaUrl} />\n      <h4>At a glance</h4>\n      <ul style={{ listStyle: \"none\" }}>\n        <li style={glanceStyle(utils.hasMaleToilet)}>\n          <i className=\"em-svg em-man-raising-hand\" />\n          Has Male toilet\n        </li>\n        <li style={glanceStyle(utils.hasFemaleToilet)}>\n          <i className=\"em-svg em-woman-raising-hand\" />\n          Has Female toilet\n        </li>\n        <li style={glanceStyle(utils.hasHandicappedToilet)}>\n          <i className=\"em-svg em-wheelchair\" />\n          {handicappedText()}\n        </li>\n        <li style={glanceStyle(utils.toiletHasWaterCooler)}>\n          <i className=\"em-svg em-potable_water\" />\n          Has water cooler\n        </li>\n        <li style={glanceStyle(utils.toiletHasShowerHeads)}>\n          <i className=\"em-svg em-shower\" />\n          Has shower heads\n        </li>\n        <li style={glanceStyle(utils.toiletHasHose)}>\n          <i className=\"em-svg em-sweat_drops\" />\n          Has hose\n        </li>\n      </ul>\n      <Reviews name={name} />\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n  query($slug: String!) {\n    toilets(fields: { slug: { eq: $slug } }) {\n      name\n      lat\n      lon\n      facilities {\n        hose\n        showerHeads\n        handicapped\n        male\n        female\n        separateHandicapped\n        waterCooler\n      }\n    paranomaUrl\n    }\n  }\n`\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","function latLonToMetres(lat1, lon1, lat2, lon2) {\n  if (lat1 === null || lat2 === null || lon1 === null || lon2 === null) {\n    return \"Location not available\"\n  }\n  const R = 6371000 // Radius of the earth in m\n  const dLat = (lat2 - lat1) * (Math.PI / 180)\n  const dLon = (lon2 - lon1) * (Math.PI / 180)\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(lat1 * (Math.PI / 180)) *\n      Math.cos(lat2 * (Math.PI / 180)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2)\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\n  const d = R * c // Distance in m\n  return Math.round(d)\n}\n\nfunction appendMetres(distance) {\n  return Number.isInteger(distance) ? distance + \"m\" : distance\n}\n\nfunction hasMaleToilet(toilet) {\n  return toilet.facilities.male\n}\n\nfunction hasFemaleToilet(toilet) {\n  return toilet.facilities.female\n}\n\nfunction hasHandicappedToilet(toilet) {\n  return toilet.facilities.handicapped\n}\n\nfunction hasSeparateHandicappedToilet(toilet) {\n  return toilet.facilities.separateHandicapped\n}\n\nfunction toiletHasHose(toilet) {\n  return toilet.facilities.hose\n}\n\nfunction toiletHasShowerHeads(toilet) {\n  return toilet.facilities.showerHeads\n}\n\nfunction toiletHasWaterCooler(toilet) {\n  return toilet.facilities.waterCooler\n}\n\nfunction buttonToLinkStyle(color, size) {\n  return {\n    backgroundColor: \"transparent\",\n    border: \"none\",\n    cursor: \"pointer\",\n    textDecoration: \"underline\",\n    display: \"inline\",\n    margin: \"0\",\n    padding: \"0\",\n    color: color,\n    fontSize: size,\n  }\n}\n\nfunction howLongAgo(date) {\n  const diff = Math.abs(date.toDate() - Date.now())\n  if (diff < 1000) {\n    return \"Now\"\n  } else if (diff < 60000) {\n    const sec = Math.floor(diff / 1000)\n    return sec === 1 ? `${sec} second ago` : `${sec} seconds ago`\n  } else if (diff < 3600000) {\n    const min = Math.floor(diff / 60000)\n    return min === 1 ? `${min} minute ago` : `${min} minutes ago`\n  } else if (diff < 86400000) {\n    const hour = Math.floor(diff / 3600000)\n    return hour === 1 ? `${hour} hour ago` : `${hour} hours ago`\n  } else if (diff < 604800000) {\n    const day = Math.floor(diff / 86400000)\n    return day === 1 ? `${day} day ago` : `${day} days ago`\n  } else if (diff < 2628000000) {\n    const week = Math.floor(diff / 604800000)\n    return week === 1 ? `${week} week ago` : `${week} weeks ago`\n  } else if (diff < 31540000000) {\n    const month = Math.floor(diff / 2628000000)\n    return month === 1 ? `${month} month ago` : `${month} months ago`\n  } else {\n    return (\n      \"Posted on \" +\n      date.toDate().toLocaleString(\"default\", {\n        day: \"numeric\",\n        month: \"long\",\n        year: \"numeric\",\n      })\n    )\n  }\n}\n\nfunction starsStateToScore(starsState) {\n  return starsState.filter(x => x).length\n}\n\nexport {\n  latLonToMetres,\n  hasMaleToilet,\n  hasFemaleToilet,\n  hasHandicappedToilet,\n  hasSeparateHandicappedToilet,\n  toiletHasHose,\n  toiletHasShowerHeads,\n  toiletHasWaterCooler,\n  appendMetres,\n  buttonToLinkStyle,\n  howLongAgo,\n  starsStateToScore\n}\n","import React from \"react\"\nimport Tippy from \"@tippy.js/react\"\n\nconst HelpButton = props => (\n  <Tippy\n    content={props.content}\n    arrow={true}\n    trigger=\"click\"\n    placement=\"bottom\"\n    interactive={true}\n  >\n    <img\n      style={{ verticalAlign: \"middle\" }}\n      src=\"https://material.io/tools/icons/static/icons/baseline-help_outline-24px.svg\"\n      alt=\"\"\n    />\n  </Tippy>\n)\n\nexport default HelpButton\n","import React from \"react\"\n\nexport default (props) => (\n  <div style={{ margin: `3rem auto`, maxWidth: 650, padding: `0 1rem` }}>\n    {props.children}\n  </div>\n)\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  withAssetPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withAssetPrefix,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  if (!pageResources) {\n    return null\n  }\n\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from \"react\"\nimport HelpButton from \"./helpButton\"\n\nconst content = (\n  <div style={{ textAlign: \"left\" }}>\n    Check that you have:\n    <ul>\n      <li>\n        Enabled your device's GPS settings\n        <ul>\n          <li>\n            <a\n              style={{\n                textShadow: \"none\",\n              }}\n              href=\"https://support.google.com/accounts/answer/3467281\"\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n            >\n              Android\n            </a>\n          </li>\n          <li>\n            <a\n              style={{ textShadow: \"none\" }}\n              href=\"https://support.apple.com/en-us/HT207092\"\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n            >\n              iOS\n            </a>\n          </li>\n          <li>Reload this page after enabling GPS settings</li>\n        </ul>\n      </li>\n      <li>\n        Allowed your browser and this website the neccessary permissions to read\n        your location\n        <ul>\n          <li>Press allow when a similar prompt as below appears</li>\n          <li>If such a prompt does not appear, reload the page</li>\n        </ul>\n      </li>\n    </ul>\n    <img\n      src=\"https://raw.githubusercontent.com/nelsontky/let-it-go/master/assets/misc/locationHelp.png\"\n      alt=\"\"\n    />\n  </div>\n)\n\nexport default () => (\n  <p>\n    Location loading/not available<HelpButton content={content} />\n  </p>\n)\n","import React from \"react\"\n\nclass PaginatedArray extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.pageSize =\n      this.props.pageSize > this.props.children.length\n        ? this.props.children.length\n        : this.props.pageSize\n\n    // Setting up page number buttons\n    this.pageButtons = []\n    for (\n      let i = 0;\n      i < Math.ceil(this.props.children.length / this.pageSize);\n      i++\n    ) {\n      this.pageButtons.push(i + 1)\n    }\n\n    // Setting up individual pages\n    this.pages = this.props.children.reduce((acc, currentValue, i) => {\n      if (i % this.pageSize === 0) {\n        acc.push([currentValue])\n        return acc\n      } else {\n        acc[acc.length - 1].push(currentValue)\n        return acc\n      }\n    }, [])\n  }\n\n  render() {\n    return (\n      <tbody>\n        {this.pages[this.props.pageNumber - 1]}\n        {this.pageSize < this.props.children.length && (\n          <tr>\n            <td colSpan={this.props.columns} style={{ border: \"0\", textAlign: \"center\" }}>\n              {this.pageButtons.map((x, i) => (\n                <button\n                  onClick={this.props.handlePageChange}\n                  id={i + 1}\n                  key={i + 1}\n                  disabled={this.props.pageNumber === i + 1}\n                >\n                  {x}\n                </button>\n              ))}\n            </td>\n          </tr>\n        )}\n      </tbody>\n    )\n  }\n}\n\nexport default PaginatedArray\n"],"sourceRoot":""}